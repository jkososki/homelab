{{- if .Values.github.githubAppRepoCreds.enabled -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.github.githubAppRepoCreds.name }}-repo-creds
  namespace: {{ $.Values.github.argocdNamespace }}
  labels:
    argocd.argoproj.io/secret-type: repo-creds
stringData:
  url: {{ required "Missing url" .Values.github.githubAppRepoCreds.url }}
  type: git
  githubAppID: {{ required "Missing value for githubAppID" .Values.github.githubAppRepoCreds.githubAppID }}
  githubAppInstallationID: {{ required "githubAppInstallationID" .Values.github.githubAppRepoCreds.githubAppInstallationID } }}
  githubAppPrivateKey: |
    {{ required "githubAppPrivateKey" .Values.github.githubAppRepoCreds.githubAppPrivateKey | indent 4 }}
{{- end -}}